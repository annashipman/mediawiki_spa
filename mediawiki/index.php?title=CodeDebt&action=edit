<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" dir="ltr">
<head>
<title>View source - SPA Wiki</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="MediaWiki 1.16.5" />
<meta name="robots" content="noindex,nofollow" />
<link rel="next" href="index.php?title=CodeDebt" />
<link rel="shortcut icon" href="../favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="SPA Wiki (en)" />
<link rel="alternate" type="application/atom+xml" title="SPA Wiki Atom feed" href="./index.php?title=Special:RecentChanges&amp;feed=atom" />
<!--[if IE 8]><link rel="stylesheet" href="/mediawiki/skins/common/IE80Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="skins/common/shared.css?270" media="screen" />
<link rel="stylesheet" href="skins/common/commonPrint.css?270" media="print" />
<link rel="stylesheet" href="skins/monobook/main.css?270" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/mediawiki/skins/monobook/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/mediawiki/skins/monobook/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/mediawiki/skins/monobook/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/mediawiki/skins/monobook/IE70Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="./index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%252Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="./index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%252Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" />
<link rel="stylesheet" href="./index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%252Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" />
<script>
var skin="monobook",
stylepath="/mediawiki/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/mediawiki/index.php?title=$1",
wgScriptPath="/mediawiki",
wgScriptExtension=".php",
wgScript="/mediawiki/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://www.spaconference.org",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="CodeDebt",
wgTitle="CodeDebt",
wgAction="edit",
wgArticleId=2169,
wgIsArticle=false,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=true,
wgCurRevisionId=3880,
wgVersion="1.16.5",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "SPA Wiki", "5": "SPA Wiki talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "spa_wiki": 4, "spa_wiki_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "image": 6, "image_talk": 7},
wgSiteName="SPA Wiki",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script><script src="skins/common/wikibits.js?270"></script>
<script src="http://www.spaconference.org/mediawiki/skins/common/edit.js?270"></script>
<script src="skins/common/ajax.js?270"></script>
<script src="index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook&amp;270"></script>

</head>
<body class="mediawiki ltr ns-0 ns-subject page-CodeDebt skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content" >
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">CodeDebt</h1>
	<div id="bodyContent">
		<h3 id="siteSub">From SPA Wiki</h3>
		<div id="contentSub">for <a href="index.php?title=CodeDebt" title="CodeDebt">CodeDebt</a></div>
		<div id="jump-to-nav">Jump to: <a href="index.php?title=CodeDebt&amp;action=edit#column-one">navigation</a>, <a href="index.php?title=CodeDebt&amp;action=edit#searchInput">search</a></div>
		<!-- start content -->
<p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="SPA Wiki:Users (page does not exist)">Users</a>.
</p>
</div>
<p>You can view and copy the source of this page:
</p><textarea id="wpTextbox1" name="wpTextbox1" cols="80" rows="25" readonly="">Thanks to all (35!) of you who turned up in a small room to participate in this session (http://www.spaconference.org/spa2008/sessions/session165.html)! There are a couple of photos at the end (see more at http://www.flickr.com/groups/spa2008photos/) to remind you that the best parties happen in the smallest kitchens...

''Peter &amp; David''

----

=== What we did ===

In the course of the session we looked at

* '''The cost of Debt''' - while all pairs in the session had the same feature to add to a conceptually "simple" piece of J''''''avaScript, sneakily half the pairs were given a ''superlative'' piece of easy-to-understand code, and the other half a much more realistic real-world example of code that had evolved under changing requirements
* '''Recognising Debt''' - looking at some Java code to identify different kinds of code liability (see outputs below)
* '''Forensic accounting''' - we looked at the history of the 'bad' code from the first exercise to try to understand some of the assumptions and decisions that had led to it's sorry state
* '''Balancing the books''' - going back to the categories of debt identified in "Recognising Debt", groups came up with proposals for avoiding these particular kinds of debt
* '''Auditing''' - we talked as a group about tools and practices which you can introduce to your teams to get them thinking about issues of code debt and how to fix them - notably ''recrimination-free refactoring'' (where the team works on a simple piece of code they're not responsible for, to foster a sense of pleasure in fixing crummy code) and a ''build and reflect'' exercise, where pairs from your team tackle a simple development task over a more extended period, and then come together to compare design decisions and reflect on why some are better - in avoiding debt - than others.

----

=== Outputs ===

Problems in systems that aren't simply errors can be put broadly into one of three categories: '''Correctness''' (fidelity to requirements, robustness, stability), '''Efficiency''' (with respect to time, space, scalability) and '''Clarity'''. Although all can carry liabilities, the Code Debt which we'#re particularly concerned with is in this last area - to do with the code communicating to its ''human'' readers, subcategorised further

* '''Comprehensibility'''
* '''Simplicity''' (minimal, no baggage)
* '''Conceptual integrity''' (correspondence with domain, effective use of language and design idioms)
* '''Behavioural integrity''' (no hidden order dependencies on method calls, for example - often to do with state)

In the course of the session, pairs identified instances of liabilities in each of these areas, then (in larger groups) considered ways of avoiding them. As of this first cut [DH, 23 March 2008] I've edited, reworded and recategorised some of these, bur I'm sure we'll refine these further.

===== Comprehensibility =====

Liabilities identified

* Interface documentation missing
* Interface name ''too'' abstract
* No description of how or why an abstract class should be subclassed
* Magic numbers in code
* Magic numbers expected as arguments
* Uncommunicative class name
* Misleading method name
:* In particular, a method named for what it does to the internals of a class, rather than from the client's point of view
* Meaningless parameter names to method
* Misleading comment
* Out-of-date comment
* No class comment
* Methods with similar names doing very different things

How to avoid

* Use accurate names
* Give everything a name (i.e. avoid 'i', 'j')
* Follow the domain in naming and behaviour
* Use language consistently
* Declare and use domain-specific types and aliases (was "minimize use of built-in types")
* Understand, share and follow common coding idioms
* Refactoring (e.g. if a name isn't clear, don't ask permission, change it!)
* Avoid comments [i.e. avoid the ''need'' for comments. DH]
* Explain exceptions [presumably in the sense of 'special cases', not programming language exceptions. DH]
* Collective code review



===== Simplicity =====

Liabilities identified

* Interface with ''way'' too many methods
* Interface/abstract class combining behaviours that should be separated
* Class with lots of code - source file too long
* Complex constructor with lots of flags

How to avoid

* Refactor!
* Use tools that support refactoring
* Make time to refactor
* Factor out common code, give it a meaningful name
* Generate and act on code metrics
* Test Driven Development
* Write down debt as it is incurred or found
* Peer code review - share good practice
* Share and stick to good coding/design conventions
* Use appropriate design idioms/patterns
* Keep a class's responsibilities simple and coherent

===== Conceptual integrity =====

Liabilities identified

* Interface/abstract class combining behaviours that should be separated
* State (e.g. Boolean flag) used to distinguish behaviours that should be separated out into distinct classes
* Confusing inheritance
* Inappropriate (or indeed any) use of instanceOf
* Knowledge of subtypes in supertypes

How to avoid

* Take naming seriously
* Name and structure code to reflect the problem domain
* Talk about names
* Describe the code intention in prose [spoken, written? DH] before implementing
* Make your tests tell a story about what the code is supposed to do
* Refactor (again!) - have courage, touch everything that needs it
* Be an abstractionist
* Establish and use a metaphor for common understanding
* Identify and separate concerns in the code
* If you hear someone say "I'm going to add to ... " - beware! [i.e. there are often many better ways to enhance a design than adding to the responsibilities or implementation of a single class or component/ DH]

===== Behavioural integrity =====

Liabilities identified

* Subclasses that behave differently when passed the same invalid arguments
* Method that does more than it's named to do
* Methods that depend on order of call. May even be documented, but not enforced
* Classes that don't fully or correctly implement their interfaces

How to avoid

* Bertrand Mayo [sic! I'll have one with Tuna, to go... DH] Shorthand for understanding and documenting pre- and post-conditions and invariants
* Use intention-revealing names to minimise inappropriate use of these methods
* When implementing an interface, implement all of it.
* Don't allow clients to rely on more than the specification [though the spec had better be good! DH]
* Don't try to solve a behavioural problem without understanding it

----
==== David's reflections ====

We all seem to understand ''comprehensibility'' and to an extent ''simplicity'', but searching for the core of conceptual and behavioural ''integrity'' seems harder. Conceptual is about understanding the syntax and semantics of both the domain and the implementation technology, and marrying these understandings in a way that doesn't distort or obfuscate either. Behavioural integrity seems to be the hardest to grok (though in fairness perhaps there weren't that many good examples of this in the code we reviewed) - but things like forced initialisation protocols, race conditions, and ability to set state (and break encapsulation and invariants) all play a part.


----

[[File:CodeDebt1.jpg]] [[File:CodeDebt2.jpg]]</textarea><div class='templatesUsed'>

</div>
<p id="mw-returnto">Return to <a href="index.php?title=CodeDebt" title="CodeDebt">CodeDebt</a>.</p>
<div class="printfooter">
Retrieved from "<a href="index.php?title=CodeDebt">http://www.spaconference.org/mediawiki/index.php?title=CodeDebt</a>"</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
				 <li id="ca-nstab-main" class="selected"><a href="index.php?title=CodeDebt" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://www.spaconference.org/mediawiki/index.php?title=Talk:CodeDebt&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource" class="selected"><a href="index.php?title=CodeDebt&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="index.php?title=CodeDebt&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="http://www.spaconference.org/mediawiki/index.php?title=User:141.101.99.128" title="The user page for the IP address you are editing as [.]" accesskey="." class="new">141.101.99.128</a></li>
				<li id="pt-anontalk"><a href="http://www.spaconference.org/mediawiki/index.php?title=User_talk:141.101.99.128" title="Discussion about edits from this IP address [n]" accesskey="n" class="new">Talk for this IP address</a></li>
				<li id="pt-anonlogin"><a href="http://www.spaconference.org/mediawiki/index.php?title=Special:UserLogin&amp;returnto=CodeDebt&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../spa2017/images/spa-small-header.png);" href="index.php?title=Main_Page" title="Visit the main page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="index.php?title=Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="./index.php?title=Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="./index.php?title=Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="http://www.spaconference.org/mediawiki/index.php?title=Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://www.spaconference.org/mediawiki/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" title="Search SPA Wiki" accesskey="f" type="search" name="search" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="./index.php?title=Special:WhatLinksHere%252FCodeDebt" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="./index.php?title=Special:RecentChangesLinked%252FCodeDebt" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="./index.php?title=Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
	<ul id="f-list">
		<li id="privacy"><a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:Privacy_policy" title="SPA Wiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:About" title="SPA Wiki:About">About SPA Wiki</a></li>
		<li id="disclaimer"><a href="http://www.spaconference.org/mediawiki/index.php?title=SPA_Wiki:General_disclaimer" title="SPA Wiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.140 secs. --></body></html>
